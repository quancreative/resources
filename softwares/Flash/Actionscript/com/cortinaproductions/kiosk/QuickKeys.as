package com.cortinaproductions.kiosk{	import flash.ui.Mouse;	import flash.events.KeyboardEvent;	import flash.ui.Keyboard;	import flash.system.fscommand;	import flash.display.*;	import flash.desktop.*;	public class QuickKeys	{		private static var instance:QuickKeys;		private static var allowInstantiation:Boolean;		private static var __stage:Stage;		var hidden:Boolean = true;		function QuickKeys()		{			if (! allowInstantiation) {				throw new Error("Error: Instantiation failed: Use SingletonDemo.getInstance() instead of new.");			}			if (__stage != null) addListeners();			Mouse.hide();			fscommand("trapallkeys","true");		}		public function setStage(_stage:Stage):void		{			__stage = _stage;			addListeners();		}				private function addListeners():void 		{			__stage.removeEventListener(KeyboardEvent.KEY_DOWN, keyPressedDown);			__stage.addEventListener(KeyboardEvent.KEY_DOWN, keyPressedDown);		}		public static function getInstance(_stage:Stage = null):QuickKeys		{			__stage = _stage;						if (instance == null) {				allowInstantiation = true;				instance = new QuickKeys();				allowInstantiation = false;			}			return instance;		}		private function keyPressedDown(event:KeyboardEvent):void		{			var key:uint = event.keyCode;			trace(key);			switch (key) {				case 27 :					fscommand("quit", "true");					//NativeApplication.nativeApplication.exit()					break;				case 77 :					hideShowMouse();					break;			}		}		private function hideShowMouse()		{			if (hidden) {				hidden = false;				Mouse.show();			}			else {				hidden = true;				Mouse.hide();			}		}	}}